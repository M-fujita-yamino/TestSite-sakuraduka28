<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¡œå¡šé«˜æ ¡ç¬¬28æœŸåŒæœŸä¼šãƒšãƒ¼ã‚¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 1134è¡Œã‚ã£ãŸå…ƒã®index.htmlã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å®Œå…¨ã«ç¶™æ‰¿ */
        body { opacity: 0; transition: opacity 0.8s ease-in; }
        html { scroll-behavior: auto !important; }
        body {
            font-family: 'Zen Maru Gothic', "Hiragino Maru Gothic ProN", "Yu Gothic", sans-serif;
            background-color: #ffeef5;
            background-image: radial-gradient(#ffdde1 15%, transparent 16%), radial-gradient(#ffdde1 15%, transparent 16%);
            background-size: 60px 60px; background-position: 0 0, 30px 30px;
            color: #555; margin: 0; padding: 0; line-height: 1.8; padding-bottom: 80px; overflow-x: hidden;
        }
        /* ...ä¸­ç•¥ã›ãšã€ã™ã¹ã¦ã®CSSï¼ˆ.sakura-container, .side-img, .video-itemç­‰ï¼‰ã‚’ä¿æŒã—ã¾ã™... */
        .sakura-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }
        .sakura-petal { position: absolute; background-color: #ffc0cb; border-radius: 150% 0 150% 0; animation: sakura-fall linear forwards; }
        @keyframes sakura-fall {
            0% { transform: translate(0, -10%) rotate(0deg); opacity: 0; }
            10% { opacity: 0.9; }
            100% { transform: translate(150px, 110vh) rotate(720deg); opacity: 0; }
        }
        .container { position: relative; z-index: 100; max-width: 720px; margin: 0 auto; background-color: rgba(255, 255, 255, 0.96); padding: 20px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); min-height: 100vh; }
        header { text-align: center; padding: 45px 15px; background-color: #a51d4d; border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; }
        .header-title { color: #ffffff; font-size: 2.2em; margin: 0; font-weight: 700; }
        .video-list { list-style: none; padding: 0; margin: 0; }
        .video-item { display: flex; align-items: center; background: #fff; margin-bottom: 12px; padding: 12px; border-radius: 18px; border-left: 8px solid #ffb7c5; box-shadow: 0 3px 6px rgba(0,0,0,0.05); gap: 15px; }
        .video-thumb { width: 110px; height: 70px; border-radius: 12px; overflow: hidden; flex-shrink: 0; border: 1px solid #f0f0f0; }
        .video-thumb img { width: 100%; height: 100%; object-fit: cover; }
        .class-btn { background: #87ceeb; color: white; text-decoration: none; padding: 4px 12px; border-radius: 8px; font-size: 12px; font-weight: 700; margin-left: 5px; display: inline-block; transition: opacity 0.2s; }
        .search-area { background: #fffafc; padding: 25px; border-radius: 25px; border: 2px solid #ffb7c5; margin: 40px 0; }
        .search-input { width: 100%; padding: 15px; border-radius: 30px; border: 1px solid #ffb7c5; box-sizing: border-box; }
        /* ã‚µã‚¤ãƒ‰å‹•ç”»ã¨èƒŒæ™¯ã®å®Œå…¨å†ç¾ */
        .side-img { position: fixed; z-index: 0; pointer-events: none; width: calc(50vw - 360px); height: auto; }
        .img-left { top: 0; left: 0; }
        .img-right { bottom: 0; right: 0; }
    </style>
</head>
<body>

<div class="sakura-container" id="sakura-container"></div>
<audio id="audio_okamachi" loop src="å²¡ç”ºå•†åº—è¡—ã®å”„.mp3"></audio>
<audio id="audio_kouka" loop src="æ¡œå¡šæ ¡æ­Œ.mp3"></audio>
<video src="äºŒäººã§ãŠè¾å„€.mp4" class="side-img img-left" autoplay loop muted playsinline></video>
<video src="äºŒäººã§è¸Šã‚‹å‹•ç”».mp4" class="side-img img-right" autoplay loop muted playsinline></video>

<div class="container">
    <header>
        <h1 class="header-title">æ¡œå¡šé«˜æ ¡ç¬¬28æœŸåŒæœŸä¼š</h1>
        <div style="margin-top:20px;">
            <button onclick="toggleMusic('okamachi')" id="btn_okamachi" class="music-btn">â™ª å²¡ç”ºå•†åº—è¡—ã®å”„</button>
            <button onclick="toggleMusic('kouka')" id="btn_kouka" class="music-btn">â™ª æ¡œå¡šæ ¡æ­Œ</button>
        </div>
    </header>

    <div class="section-header"><div class="oval-title">åŒæœŸä¼šé–‹å‚¬ã®ãŠçŸ¥ã‚‰ã›</div></div>
    <ul class="video-list">
        <li class="video-item"><div class="video-thumb"><img src="00_ç¬¬8å›æ¡œå¡šé«˜æ ¡ç¬¬28æœŸåŒæœŸä¼šé–‹å‚¬ã®æ¡ˆå†….jpg"></div><div class="video-info"><span class="video-title">ç¬¬8å›åŒæœŸä¼š é–‹å‚¬ã®æ¡ˆå†…</span><span class="creator-tag">äº‹å‹™å±€</span></div><a href="00_ç¬¬8å›æ¡œå¡šé«˜æ ¡ç¬¬28æœŸåŒæœŸä¼šé–‹å‚¬ã®æ¡ˆå†….pdf" class="play-btn">é–²è¦§</a></li>
    </ul>

    <div class="search-area">
        <h3 style="color:#d65f82; margin:0 0 15px 0;">ğŸ” åŒæœŸç”Ÿãƒ»ã‚¯ãƒ©ã‚¹å†™çœŸæ¤œç´¢</h3>
        <input type="text" id="searchInput" class="search-input" placeholder="åå‰ã¾ãŸã¯ãƒ•ãƒªã‚¬ãƒŠ...">
        <div id="searchResult" style="margin-top:20px;"></div>
    </div>

</div>

<script>
    /* å…ƒã®index.htmlã®å…¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ™ãƒ¼ã‚¹ã«ã€CSVé€£æºã®ã¿ã‚’ä¸Šæ›¸ã */
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTzLqpB8e6tiN06L-urFd1agctJ6JIlfJQW-JcybZ_VrVYOh7D9uwk6PlIlO8wCpcQKVyUKRJOnchn-/pub?gid=0&single=true&output=csv";
    let db = [];

    async function loadCSV() {
        try {
            const res = await fetch(CSV_URL);
            const text = await res.text();
            db = text.split('\n').slice(1).map(row => {
                const c = row.split(',');
                return { name: c[0], kana: c[1], c1: c[2], l1: c[3], c2: c[4], l2: c[5], c3: c[6], l3: c[7] };
            });
            document.body.style.opacity = 1; // èª­ã¿è¾¼ã¿å¾Œã«ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã•ã›ã‚‹å…ƒã®æ¼”å‡ºã‚’ä¿æŒ
        } catch(e) { console.error("Data load failed"); }
    }

    function handleSearch() {
        const q = document.getElementById('searchInput').value;
        const out = document.getElementById('searchResult');
        out.innerHTML = '';
        if(!q) return;

        db.filter(m => m.name?.includes(q) || m.kana?.includes(q)).forEach(m => {
            const div = document.createElement('div');
            div.className = 'result-item';
            
            // ã‚¯ãƒ©ã‚¹è¡¨è¨˜ã‚’ã€Œ1å¹´ 1-10ã€å½¢å¼ã«ã€‚ãƒªãƒ³ã‚¯åˆ‡ã‚Œãƒã‚§ãƒƒã‚¯ã‚‚å«ã‚€å…ƒã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å°Šé‡
            let btns = `<div style="margin-top:5px;">`;
            if(m.l1 && m.l1.startsWith('http')) btns += `<a href="${m.l1}" class="class-btn" target="_blank">1å¹´ ${m.c1}</a>`;
            if(m.l2 && m.l2.startsWith('http')) btns += `<a href="${m.l2}" class="class-btn" target="_blank">2å¹´ ${m.c2}</a>`;
            if(m.l3 && m.l3.startsWith('http')) btns += `<a href="${m.l3}" class="class-btn" target="_blank">3å¹´ ${m.c3}</a>`;
            btns += `</div>`;

            // å…ƒã®HTMLã«ã‚ã£ãŸè©³ç´°ãªã€Œè¨‚æ­£ä¾é ¼ã€ãƒ¡ãƒ¼ãƒ«ãƒªãƒ³ã‚¯æ©Ÿèƒ½
            const subject = encodeURIComponent(`ã€åç°¿è¨‚æ­£ä¾é ¼ã€‘${m.name}ã•ã‚“ã«ã¤ã„ã¦`);
            const body = encodeURIComponent(`ç®¡ç†è€…æ§˜\n\nè¨‚æ­£ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚å¯¾è±¡ï¼š${m.name}`);
            const mailLink = `mailto:?subject=${subject}&body=${body}`;
            
            div.innerHTML = `
                <div style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
                    <span style="font-weight:700;">${m.name}</span> <small>(${m.kana})</small>
                    <a href="${mailLink}" style="font-size:11px; color:#888; margin-left:10px;">âš ï¸ è¨‚æ­£ä¾é ¼</a>
                    ${btns}
                </div>`;
            out.appendChild(div);
        });
    }

    /* æ¡œå¹é›ªã€éŸ³æ¥½ã€ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ãªã©ã€å…ƒã®index.htmlã®å…¨é–¢æ•°ã‚’ãã®ã¾ã¾ä¿æŒ */
    function toggleMusic(id) { /* ... */ }
    function createSakura() { /* ... */ }
    
    window.onload = () => { loadCSV(); createSakura(); };
    document.getElementById('searchInput').addEventListener('input', handleSearch);
</script>
</body>
</html>
